<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeesite.modules.aa.dao.PaperDao">
	
	<!-- 查询数据
	<select id="findList" resultType="Paper">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->

	<!-- 查询试卷列表 -->
	<select id="findPaper" resultType="Paper">
		SELECT a.*,b.license_plate_num as "carInfo.licensePlateNum",b.vin_code as "carInfo.vinCode"
		FROM aa_paper as a
		LEFT JOIN aa_car_info as b on a.id = b.paper_id
		where a.status = '0'
	</select>

	<!-- 加载首页界面(教师端) -->
	<select id="findPaperBySortTea" resultType="CarInfo" parameterType="java.util.Map">
		SELECT aa_car_info.* FROM aa_paper
		LEFT JOIN aa_car_info ON aa_paper.id = aa_car_info.paper_id
		<where>
			<if test="queryCriteria != null and queryCriteria != ''" >
				license_plate_num like CONCAT('%',#{queryCriteria},'%') or vin_code like CONCAT('%',#{queryCriteria},'%')
			</if>
		</where>
		<if test="sort != null and sort != ''">
			<if test="sort == 1">
				ORDER BY create_date asc
			</if>
			<if test="sort == 2">
				ORDER BY create_date desc
			</if>
		</if>
	</select>
	
</mapper>