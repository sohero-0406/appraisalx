<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeesite.modules.aa.dao.CalculateDao">
	
	<!-- 查询数据
	<select id="findList" resultType="Calculate">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->

	<select id="getEstimateByType" resultType="java.util.Map">
	select
		case
		 when calculate.type = '1' THEN calculateDepreciation.price
		 when calculate.type = '2' THEN calculateKm.price
		 when calculate.type = '3' THEN calculateReplaceCost.price
		 when calculate.type = '4' THEN calculateCurrent.price
		ELSE ' ' END AS price
		from aa_calculate calculate
		left join aa_calculate_current calculateCurrent on calculateCurrent.calculate_id = calculate.id
		left join aa_calculate_depreciation calculateDepreciation on calculateDepreciation.calculate_id = calculate.id
		left join aa_calculate_km calculateKm on calculateKm.calculate_id = calculate.id
		left join aa_calculate_replace_cost calculateReplaceCost on calculateReplaceCost.calculate_id = calculate.id
		where calculate.status = '0'
		and calculate.exam_user_id = #{examUserId}

	</select>
	
</mapper>