<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeesite.modules.aa.dao.ExamScoreInfoDao">
	
	<!-- 查询数据
	<select id="findList" resultType="ExamScoreInfo">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->

	<resultMap id="findDataMap" type="ExamScoreInfo">
		<id property="id" column="id"></id>
		<result property="name" column="name"></result>
		<result property="score" column="score"></result>
		<collection property="itemList" ofType="ExamScoreInfo">
			<id property="id" column="sonId"></id>
			<result property="name" column="sonName"></result>
			<result property="score" column="sonScore"></result>
		</collection>
	</resultMap>

	<select id="getExamScoreInfo" resultMap="findDataMap">
		  select
			aExam.id,
			aExam.name,
			aExam.score,
			bExam.id as sonId,
			bExam.name as sonName,
			bExam.score as sonScore
		 from aa_exam_score_info aExam
		LEFT JOIN aa_exam_score_info  bExam on aExam.id = bExam.parent_id
		where  aExam.parent_id = '0'
		ORDER BY aExam.sort,bExam.sort;

	</select>
	
</mapper>